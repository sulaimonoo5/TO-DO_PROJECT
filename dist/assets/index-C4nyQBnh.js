(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=t(a);fetch(a.href,s)}})();class _{constructor(){this.events=this.loadEvents(),this.categories=this.loadCategories()}loadEvents(){const e=localStorage.getItem("calendarEvents");return e?JSON.parse(e).map(t=>({...t,start:new Date(t.start),end:new Date(t.end)})):[]}loadCategories(){const e=localStorage.getItem("categories");return e?JSON.parse(e):[{id:"personal",name:"Personal",color:"event-yellow"},{id:"work",name:"Work",color:"event-purple"},{id:"meeting",name:"Meeting",color:"event-blue"}]}saveEvents(){localStorage.setItem("calendarEvents",JSON.stringify(this.events))}saveCategories(){localStorage.setItem("categories",JSON.stringify(this.categories))}getEvents(){return this.events}getEventById(e){return this.events.find(t=>t.id===e)}getEventsForDay(e){return this.events.filter(t=>{const n=new Date(t.start);return n.getDate()===e.getDate()&&n.getMonth()===e.getMonth()&&n.getFullYear()===e.getFullYear()})}getEventsByCategory(e){return this.events.filter(t=>t.category===e)}addEvent(e){const t={id:Date.now(),...e,color:this.getCategoryColor(e.category)};return this.events.push(t),this.saveEvents(),t}updateEvent(e,t){this.events=this.events.map(n=>n.id===e?{...n,...t,color:this.getCategoryColor(t.category)}:n),this.saveEvents()}deleteEvent(e){this.events=this.events.filter(t=>t.id!==e),this.saveEvents()}getCategories(){return this.categories}getCategoryColor(e){const t=this.categories.find(n=>n.id===e);return t?t.color:"event-gray"}addCategory(e,t){const n={id:e.toLowerCase().replace(/\s+/g,"-"),name:e,color:t};return this.categories.push(n),this.saveCategories(),n}updateCategory(e,t){this.categories=this.categories.map(n=>n.id===e?{...n,...t}:n),this.saveCategories()}deleteCategory(e){this.events=this.events.map(t=>t.category===e?{...t,category:"personal",color:this.getCategoryColor("personal")}:t),this.categories=this.categories.filter(t=>t.id!==e),this.saveCategories(),this.saveEvents()}searchEvents(e){if(!e)return this.events;const t=e.toLowerCase();return this.events.filter(n=>{const a=this.categories.find(s=>s.id===n.category);return n.title.toLowerCase().includes(t)||a&&a.name.toLowerCase().includes(t)})}}function u(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function v(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function Q(r,e){const t=u(r);return isNaN(e)?v(r,NaN):(e&&t.setDate(t.getDate()+e),t)}function G(r,e){const t=u(r);if(isNaN(e))return v(r,NaN);if(!e)return t;const n=t.getDate(),a=v(r,t.getTime());a.setMonth(t.getMonth()+e+1,0);const s=a.getDate();return n>=s?a:(t.setFullYear(a.getFullYear(),a.getMonth(),n),t)}const N=6048e5,V=864e5,X=6e4;let R={};function k(){return R}function D(r,e){var i,d,l,h;const t=k(),n=(e==null?void 0:e.weekStartsOn)??((d=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((h=(l=t.locale)==null?void 0:l.options)==null?void 0:h.weekStartsOn)??0,a=u(r),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function S(r){return D(r,{weekStartsOn:1})}function H(r){const e=u(r),t=e.getFullYear(),n=v(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const a=S(n),s=v(r,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);const o=S(s);return e.getTime()>=a.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function P(r){const e=u(r);return e.setHours(0,0,0,0),e}function W(r){const e=u(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function z(r,e){const t=P(r),n=P(e),a=+t-W(t),s=+n-W(n);return Math.round((a-s)/V)}function J(r){const e=H(r),t=v(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),S(t)}function U(r,e){const t=e*7;return Q(r,t)}function K(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function Z(r){if(!K(r)&&typeof r!="number")return!1;const e=u(r);return!isNaN(Number(e))}function ee(r){return e=>{const n=(r?Math[r]:Math.trunc)(e);return n===0?0:n}}function te(r,e){return+u(r)-+u(e)}function F(r,e,t){const n=te(r,e)/X;return ee(t==null?void 0:t.roundingMethod)(n)}function ne(r){const e=u(r),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function $(r,e){const t=u(r.start),n=u(r.end);let a=+t>+n;const s=a?+t:+n,o=a?n:t;o.setHours(0,0,0,0);let i=1;const d=[];for(;+o<=s;)d.push(u(o)),o.setDate(o.getDate()+i),o.setHours(0,0,0,0);return a?d.reverse():d}function re(r){const e=u(r);return e.setDate(1),e.setHours(0,0,0,0),e}function ae(r){const e=u(r),t=v(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function se(r,e){var i,d;const t=k(),n=t.weekStartsOn??((d=(i=t.locale)==null?void 0:i.options)==null?void 0:d.weekStartsOn)??0,a=u(r),s=a.getDay(),o=(s<n?-7:0)+6-(s-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ie=(r,e,t)=>{let n;const a=oe[r];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function T(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const de={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ue={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},le={date:T({formats:de,defaultWidth:"full"}),time:T({formats:ce,defaultWidth:"full"}),dateTime:T({formats:ue,defaultWidth:"full"})},he={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},me=(r,e,t,n)=>he[r];function E(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let a;if(n==="formatting"&&r.formattingValues){const o=r.defaultFormattingWidth||r.defaultWidth,i=t!=null&&t.width?String(t.width):o;a=r.formattingValues[i]||r.formattingValues[o]}else{const o=r.defaultWidth,i=t!=null&&t.width?String(t.width):r.defaultWidth;a=r.values[i]||r.values[o]}const s=r.argumentCallback?r.argumentCallback(e):e;return a[s]}}const fe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ve={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},we={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},be={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pe=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},De={ordinalNumber:pe,era:E({values:fe,defaultWidth:"wide"}),quarter:E({values:ge,defaultWidth:"wide",argumentCallback:r=>r-1}),month:E({values:ye,defaultWidth:"wide"}),day:E({values:ve,defaultWidth:"wide"}),dayPeriod:E({values:we,defaultWidth:"wide",formattingValues:be,defaultFormattingWidth:"wide"})};function C(r){return(e,t={})=>{const n=t.width,a=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],i=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(i)?Me(i,g=>g.test(o)):xe(i,g=>g.test(o));let l;l=r.valueCallback?r.valueCallback(d):d,l=t.valueCallback?t.valueCallback(l):l;const h=e.slice(o.length);return{value:l,rest:h}}}function xe(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function Me(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function Ee(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const a=n[0],s=e.match(r.parsePattern);if(!s)return null;let o=r.valueCallback?r.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const i=e.slice(a.length);return{value:o,rest:i}}}const Ce=/^(\d+)(th|st|nd|rd)?/i,ke=/\d+/i,Se={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Oe={any:[/^b/i,/^(a|c)/i]},Te={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Pe={any:[/1/i,/2/i,/3/i,/4/i]},We={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Le={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ye={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Be={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qe={ordinalNumber:Ee({matchPattern:Ce,parsePattern:ke,valueCallback:r=>parseInt(r,10)}),era:C({matchPatterns:Se,defaultMatchWidth:"wide",parsePatterns:Oe,defaultParseWidth:"any"}),quarter:C({matchPatterns:Te,defaultMatchWidth:"wide",parsePatterns:Pe,defaultParseWidth:"any",valueCallback:r=>r+1}),month:C({matchPatterns:We,defaultMatchWidth:"wide",parsePatterns:Fe,defaultParseWidth:"any"}),day:C({matchPatterns:Ie,defaultMatchWidth:"wide",parsePatterns:Le,defaultParseWidth:"any"}),dayPeriod:C({matchPatterns:Ye,defaultMatchWidth:"any",parsePatterns:Be,defaultParseWidth:"any"})},Ne={code:"en-US",formatDistance:ie,formatLong:le,formatRelative:me,localize:De,match:qe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function He(r){const e=u(r);return z(e,ae(e))+1}function $e(r){const e=u(r),t=+S(e)-+J(e);return Math.round(t/N)+1}function A(r,e){var h,g,x,M;const t=u(r),n=t.getFullYear(),a=k(),s=(e==null?void 0:e.firstWeekContainsDate)??((g=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??a.firstWeekContainsDate??((M=(x=a.locale)==null?void 0:x.options)==null?void 0:M.firstWeekContainsDate)??1,o=v(r,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const i=D(o,e),d=v(r,0);d.setFullYear(n,0,s),d.setHours(0,0,0,0);const l=D(d,e);return t.getTime()>=i.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function Ae(r,e){var i,d,l,h;const t=k(),n=(e==null?void 0:e.firstWeekContainsDate)??((d=(i=e==null?void 0:e.locale)==null?void 0:i.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(l=t.locale)==null?void 0:l.options)==null?void 0:h.firstWeekContainsDate)??1,a=A(r,e),s=v(r,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),D(s,e)}function je(r,e){const t=u(r),n=+D(t,e)-+Ae(t,e);return Math.round(n/N)+1}function c(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const w={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return c(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):c(t+1,2)},d(r,e){return c(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return c(r.getHours()%12||12,e.length)},H(r,e){return c(r.getHours(),e.length)},m(r,e){return c(r.getMinutes(),e.length)},s(r,e){return c(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),a=Math.trunc(n*Math.pow(10,t-3));return c(a,e.length)}},p={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},I={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),a=n>0?n:1-n;return t.ordinalNumber(a,{unit:"year"})}return w.y(r,e)},Y:function(r,e,t,n){const a=A(r,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return c(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):c(s,e.length)},R:function(r,e){const t=H(r);return c(t,e.length)},u:function(r,e){const t=r.getFullYear();return c(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return c(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return c(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return w.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return c(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const a=je(r,n);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):c(a,e.length)},I:function(r,e,t){const n=$e(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):c(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):w.d(r,e)},D:function(r,e,t){const n=He(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):c(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const a=r.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return c(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const a=r.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return c(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return c(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const a=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let a;switch(n===12?a=p.noon:n===0?a=p.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let a;switch(n>=17?a=p.evening:n>=12?a=p.afternoon:n>=4?a=p.morning:a=p.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return w.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):w.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):c(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):c(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):w.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):w.s(r,e)},S:function(r,e){return w.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Y(n);case"XXXX":case"XX":return b(n);case"XXXXX":case"XXX":default:return b(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Y(n);case"xxxx":case"xx":return b(n);case"xxxxx":case"xxx":default:return b(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+L(n,":");case"OOOO":default:return"GMT"+b(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+L(n,":");case"zzzz":default:return"GMT"+b(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return c(n,e.length)},T:function(r,e,t){const n=r.getTime();return c(n,e.length)}};function L(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=Math.trunc(n/60),s=n%60;return s===0?t+String(a):t+String(a)+e+c(s,2)}function Y(r,e){return r%60===0?(r>0?"-":"+")+c(Math.abs(r)/60,2):b(r,e)}function b(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),a=c(Math.trunc(n/60),2),s=c(n%60,2);return t+a+e+s}const B=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},j=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_e=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],a=t[2];if(!a)return B(r,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",B(n,e)).replace("{{time}}",j(a,e))},Qe={p:j,P:_e},Ge=/^D+$/,Ve=/^Y+$/,Xe=["D","DD","YY","YYYY"];function Re(r){return Ge.test(r)}function ze(r){return Ve.test(r)}function Je(r,e,t){const n=Ue(r,e,t);if(console.warn(n),Xe.includes(r))throw new RangeError(n)}function Ue(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ke=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ze=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,et=/^'([^]*?)'?$/,tt=/''/g,nt=/[a-zA-Z]/;function y(r,e,t){var h,g,x,M;const n=k(),a=n.locale??Ne,s=n.firstWeekContainsDate??((g=(h=n.locale)==null?void 0:h.options)==null?void 0:g.firstWeekContainsDate)??1,o=n.weekStartsOn??((M=(x=n.locale)==null?void 0:x.options)==null?void 0:M.weekStartsOn)??0,i=u(r);if(!Z(i))throw new RangeError("Invalid time value");let d=e.match(Ze).map(f=>{const m=f[0];if(m==="p"||m==="P"){const O=Qe[m];return O(f,a.formatLong)}return f}).join("").match(Ke).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const m=f[0];if(m==="'")return{isToken:!1,value:rt(f)};if(I[m])return{isToken:!0,value:f};if(m.match(nt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:f}});a.localize.preprocessor&&(d=a.localize.preprocessor(i,d));const l={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return d.map(f=>{if(!f.isToken)return f.value;const m=f.value;(ze(m)||Re(m))&&Je(m,e,String(r));const O=I[m[0]];return O(i,m,a.localize,l)}).join("")}function rt(r){const e=r.match(et);return e?e[1].replace(tt,"'"):r}function at(r){const e=new Date;return r.getDate()===e.getDate()&&r.getMonth()===e.getMonth()&&r.getFullYear()===e.getFullYear()}function st(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}function q(r=5,e=23){const t=[];for(let n=r;n<=e;n++)t.push({hour:n,label:y(new Date().setHours(n,0),"ha")});return t}class ot{constructor(e,t){this.container=e,this.currentDate=t,this.setupHeaderDays()}setupHeaderDays(){if(!this.container)return;const e=st(),t=new Date(this.currentDate);t.setDate(t.getDate()-t.getDay()),this.container.innerHTML=e.map((n,a)=>{const s=new Date(t);return s.setDate(s.getDate()+a),`
        <div class="text-center p-4">
          <div class="text-sm font-medium text-gray-500">${n}</div>
          <div class="text-2xl font-semibold ${this.isToday(s)?"text-blue-600":""}">${y(s,"d")}</div>
        </div>
      `}).join("")}isToday(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}update(e){this.currentDate=e,this.setupHeaderDays()}}class it{constructor(e){this.service=e,this.setupModal()}setupModal(){const e=document.createElement("div");e.id="eventModal",e.className="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50",e.innerHTML=`
      <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
        <form id="eventForm" class="space-y-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">Add New Event</h3>
            <button type="button" class="delete-btn hidden text-red-600 hover:text-red-800">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Title</label>
            <input type="text" name="title" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Date</label>
            <input type="date" name="date" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700">Start Time</label>
              <input type="time" name="startTime" required
                     class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700">End Time</label>
              <input type="time" name="endTime" required
                     class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Category</label>
            <select name="category" required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
            </select>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" class="cancel-btn px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
              Cancel
            </button>
            <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
              Save Event
            </button>
          </div>
        </form>
      </div>
    `,document.body.appendChild(e),this.bindEvents()}bindEvents(){const e=document.getElementById("eventModal"),t=document.getElementById("eventForm"),n=e.querySelector(".delete-btn");e.querySelector(".cancel-btn").addEventListener("click",()=>this.hide()),t.addEventListener("submit",a=>this.handleSubmit(a)),n.addEventListener("click",()=>this.handleDelete())}show(e=null){const t=document.getElementById("eventModal"),n=document.getElementById("eventForm"),a=t.querySelector("h3"),s=t.querySelector('button[type="submit"]'),o=t.querySelector(".delete-btn");this.updateCategorySelect(),e?(a.textContent="Edit Event",s.textContent="Update Event",o.classList.remove("hidden"),this.fillFormWithEvent(e),n.dataset.eventId=e.id):(a.textContent="Add New Event",s.textContent="Save Event",o.classList.add("hidden"),n.reset(),delete n.dataset.eventId),t.classList.remove("hidden")}hide(){document.getElementById("eventModal").classList.add("hidden")}updateCategorySelect(){const e=document.querySelector('select[name="category"]'),t=this.service.getCategories();e.innerHTML=t.map(n=>`
      <option value="${n.id}" class="${n.color}">
        ${n.name}
      </option>
    `).join("")}fillFormWithEvent(e){const t=document.getElementById("eventForm");t.elements.title.value=e.title,t.elements.date.value=y(new Date(e.start),"yyyy-MM-dd"),t.elements.startTime.value=y(new Date(e.start),"HH:mm"),t.elements.endTime.value=y(new Date(e.end),"HH:mm"),t.elements.category.value=e.category}handleDelete(){const e=document.getElementById("eventForm"),t=parseInt(e.dataset.eventId);confirm("Are you sure you want to delete this event?")&&(this.service.deleteEvent(t),this.hide(),window.calendarApp.view.render(),window.calendarApp.view.updateInboxCount())}handleSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t),a={title:n.get("title"),start:new Date(`${n.get("date")}T${n.get("startTime")}`),end:new Date(`${n.get("date")}T${n.get("endTime")}`),category:n.get("category")};t.dataset.eventId?this.service.updateEvent(parseInt(t.dataset.eventId),a):this.service.addEvent(a),this.hide(),t.reset(),window.calendarApp.view.render(),window.calendarApp.view.updateInboxCount()}}class dt{constructor(e){this.service=e,this.setupModal()}setupModal(){const e=document.createElement("div");e.id="categoryModal",e.className="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50",e.innerHTML=`
      <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
        <form id="categoryForm" class="space-y-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">Add New Category</h3>
            <button type="button" class="delete-btn hidden text-red-600 hover:text-red-800">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
              </svg>
            </button>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Category Name</label>
            <input type="text" name="name" required
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700">Color</label>
            <select name="color" required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <option value="event-yellow">Yellow</option>
              <option value="event-purple">Purple</option>
              <option value="event-blue">Blue</option>
              <option value="event-green">Green</option>
              <option value="event-red">Red</option>
            </select>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" class="cancel-btn px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
              Cancel
            </button>
            <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
              Add Category
            </button>
          </div>
        </form>
      </div>
    `,document.body.appendChild(e),this.bindEvents()}bindEvents(){const e=document.getElementById("categoryModal"),t=document.getElementById("categoryForm"),n=e.querySelector(".delete-btn");e.querySelector(".cancel-btn").addEventListener("click",()=>this.hide()),t.addEventListener("submit",a=>this.handleSubmit(a)),n.addEventListener("click",()=>this.handleDelete())}show(e=null){const t=document.getElementById("categoryModal"),n=document.getElementById("categoryForm"),a=t.querySelector("h3"),s=t.querySelector('button[type="submit"]'),o=t.querySelector(".delete-btn");e?(a.textContent="Edit Category",s.textContent="Update Category",o.classList.remove("hidden"),this.fillFormWithCategory(e),n.dataset.categoryId=e.id):(a.textContent="Add New Category",s.textContent="Add Category",o.classList.add("hidden"),n.reset(),delete n.dataset.categoryId),t.classList.remove("hidden")}hide(){document.getElementById("categoryModal").classList.add("hidden")}fillFormWithCategory(e){const t=document.getElementById("categoryForm");t.elements.name.value=e.name,t.elements.color.value=e.color}handleDelete(){const t=document.getElementById("categoryForm").dataset.categoryId;confirm("Are you sure you want to delete this category? All events in this category will be moved to default category.")&&(this.service.deleteCategory(t),this.hide(),window.calendarApp.view.renderCategories(),window.calendarApp.view.render())}handleSubmit(e){e.preventDefault();const t=e.target,n=new FormData(t),a={name:n.get("name"),color:n.get("color")};t.dataset.categoryId?this.service.updateCategory(t.dataset.categoryId,a):this.service.addCategory(a.name,a.color),this.hide(),t.reset(),window.calendarApp.view.renderCategories(),window.calendarApp.view.render()}}function ct(r,e){let t;return function(...a){const s=()=>{clearTimeout(t),r(...a)};clearTimeout(t),t=setTimeout(s,e)}}class ut{constructor(e,t){this.service=e,this.onSearch=t,this.initializeSearch()}initializeSearch(){const e=document.querySelector('input[type="text"][placeholder="Search"]');if(!e)return;const t=ct(n=>{const a=this.service.searchEvents(n);this.onSearch(a)},300);e.addEventListener("input",n=>{const a=n.target.value.trim();t(a)}),e.addEventListener("keyup",n=>{n.target.value===""&&this.onSearch(this.service.getEvents())})}}class lt{constructor(e){this.service=e,this.currentDate=new Date,this.searchBar=new ut(e,t=>{this.renderFilteredEvents(t)}),this.initializeUI(),this.render()}initializeUI(){this.container=document.getElementById("calendar-grid"),this.headerContainer=document.getElementById("calendar-header"),this.headerContainer&&(this.header=new ot(this.headerContainer,this.currentDate)),this.eventModal=new it(this.service),this.categoryModal=new dt(this.service),this.setupTimeGrid(),this.bindEvents(),this.updateMonthDisplay(),this.renderCategories(),this.updateInboxCount()}updateInboxCount(){const e=document.getElementById("inboxCount");if(!e)return;const n=this.service.getEvents().filter(a=>{const s=new Date(a.start),o=new Date;return s.getDate()===o.getDate()&&s.getMonth()===o.getMonth()&&s.getFullYear()===o.getFullYear()});e.textContent=n.length}setupTimeGrid(){const e=document.getElementById("time-grid");if(!e)return;const t=q(5,23);e.innerHTML=t.map(n=>`
      <div class="h-[60px] text-xs text-gray-500 text-right pr-2">
        ${n.label}
      </div>
    `).join("")}bindEvents(){var e,t,n,a,s;(e=document.querySelector(".new-event-btn"))==null||e.addEventListener("click",()=>{this.eventModal.show()}),(t=document.getElementById("addCategoryBtn"))==null||t.addEventListener("click",()=>{this.categoryModal.show()}),(n=document.getElementById("prevWeek"))==null||n.addEventListener("click",()=>{this.navigateWeek(-1)}),(a=document.getElementById("nextWeek"))==null||a.addEventListener("click",()=>{this.navigateWeek(1)}),(s=document.getElementById("monthSelector"))==null||s.addEventListener("click",o=>{window.miniCalendar.show(o.target)})}updateMonthDisplay(){const e=document.getElementById("monthSelector");e&&(e.textContent=y(this.currentDate,"MMMM yyyy"))}selectDate(e){this.currentDate=e,this.header.update(this.currentDate),this.updateMonthDisplay(),this.render()}navigateWeek(e){this.currentDate=U(this.currentDate,e),this.header.update(this.currentDate),this.updateMonthDisplay(),this.render()}renderCategories(){const e=document.getElementById("categoryList");if(!e)return;const t=this.service.getCategories();e.innerHTML=t.map(n=>`
      <div class="flex items-center justify-between text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-100">
        <a href="#" class="flex items-center flex-1" onclick="calendarApp.view.filterByCategory('${n.id}')">
          <span class="w-2 h-2 ${n.color} rounded-full mr-2"></span>
          ${n.name}
        </a>
        ${n.id!=="default"?`
          <button onclick="calendarApp.view.editCategory('${n.id}')" class="text-gray-500 hover:text-gray-700">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
            </svg>
          </button>
        `:""}
      </div>
    `).join("")}editCategory(e){const t=this.service.getCategories().find(n=>n.id===e);t&&this.categoryModal.show(t)}filterByCategory(e){const t=e==="all"?this.service.getEvents():this.service.getEventsByCategory(e);this.renderFilteredEvents(t)}renderFilteredEvents(e){if(!this.container)return;const t=D(this.currentDate),n=se(this.currentDate),a=$({start:t,end:n});this.container.innerHTML=a.map(s=>{const o=e.filter(i=>{const d=new Date(i.start);return d.getDate()===s.getDate()&&d.getMonth()===s.getMonth()&&d.getFullYear()===s.getFullYear()});return this.renderDayColumn(s,o)}).join(""),this.setupDragAndDrop()}render(){const e=this.service.getEvents();this.renderFilteredEvents(e)}renderDayColumn(e,t){const n=q(5,23);return`
      <div class="calendar-column bg-white" data-date="${y(e,"yyyy-MM-dd")}">
        ${n.map(a=>`
          <div class="calendar-cell hover:bg-gray-50" data-hour="${a.hour}">
            ${t.filter(s=>new Date(s.start).getHours()===a.hour).map(s=>this.renderEvent(s)).join("")}
          </div>
        `).join("")}
      </div>
    `}renderEvent(e){const t=new Date(e.start),n=new Date(e.end),s=F(n,t)/60*60,o=t.getMinutes()/60*60;return`
      <div class="calendar-event ${e.color} cursor-move"
           data-event-id="${e.id}"
           style="height: ${s}px; top: ${o}px;"
           draggable="true"
           onclick="calendarApp.view.editEvent(${e.id})">
        <div class="text-sm font-semibold">${e.title}</div>
        <div class="text-xs">
          ${y(t,"h:mm a")} - ${y(n,"h:mm a")}
        </div>
      </div>
    `}editEvent(e){const t=this.service.getEventById(e);t&&this.eventModal.show(t)}setupDragAndDrop(){const e=document.querySelectorAll(".calendar-event"),t=document.querySelectorAll(".calendar-cell");e.forEach(n=>{n.addEventListener("dragstart",a=>{a.dataTransfer.setData("text/plain",n.dataset.eventId),a.dataTransfer.effectAllowed="move"})}),t.forEach(n=>{n.addEventListener("dragover",a=>{a.preventDefault(),a.dataTransfer.dropEffect="move",n.classList.add("bg-gray-100")}),n.addEventListener("dragleave",()=>{n.classList.remove("bg-gray-100")}),n.addEventListener("drop",a=>{a.preventDefault(),n.classList.remove("bg-gray-100");const s=parseInt(a.dataTransfer.getData("text/plain")),o=this.service.getEventById(s);if(o){const i=new Date(n.closest(".calendar-column").dataset.date),d=parseInt(n.dataset.hour),l=new Date(o.start),h=F(new Date(o.end),l);i.setHours(d),i.setMinutes(l.getMinutes());const g=new Date(i);g.setMinutes(i.getMinutes()+h),this.service.updateEvent(s,{...o,start:i,end:g}),this.render()}})})}}class ht{constructor(e){this.service=e,this.currentDate=new Date,this.setupCalendar()}setupCalendar(){const e=document.createElement("div");e.id="miniCalendar",e.className="bg-white rounded-lg shadow-lg p-4 absolute z-50 hidden",document.body.appendChild(e),this.render(),this.bindEvents()}bindEvents(){document.addEventListener("click",e=>{const t=document.getElementById("miniCalendar"),n=document.getElementById("monthSelector");!t.contains(e.target)&&!n.contains(e.target)&&this.hide()})}show(e){const t=document.getElementById("miniCalendar"),n=e.getBoundingClientRect();t.style.top=`${n.bottom+5}px`,t.style.left=`${n.left}px`,t.classList.remove("hidden"),this.render()}hide(){document.getElementById("miniCalendar").classList.add("hidden")}navigateMonth(e){this.currentDate=G(this.currentDate,e),this.render()}selectDate(e){window.calendarApp.view.selectDate(e),this.hide()}render(){const e=document.getElementById("miniCalendar"),t=re(this.currentDate),n=ne(this.currentDate),a=$({start:t,end:n}),s=t.getDay();e.innerHTML=`
      <div class="flex justify-between items-center mb-4">
        <button class="text-gray-600 hover:text-gray-800" onclick="miniCalendar.navigateMonth(-1)">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        </button>
        <span class="font-semibold">${y(this.currentDate,"MMMM yyyy")}</span>
        <button class="text-gray-600 hover:text-gray-800" onclick="miniCalendar.navigateMonth(1)">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </button>
      </div>
      <div class="grid grid-cols-7 gap-1">
        ${["Su","Mo","Tu","We","Th","Fr","Sa"].map(o=>`<div class="text-center text-sm font-medium text-gray-600">${o}</div>`).join("")}
        ${Array(s).fill(0).map(()=>'<div class="h-8"></div>').join("")}
        ${a.map(o=>{const i=this.service.getEventsForDay(o).length>0;return`
            <div class="h-8 flex items-center justify-center">
              <button
                class="w-8 h-8 flex items-center justify-center rounded-full
                       ${at(o)?"bg-blue-600 text-white":""}
                       ${i?"font-bold":""}
                       hover:bg-gray-100"
                onclick="miniCalendar.selectDate(new Date('${o.toISOString()}'))"
              >
                ${y(o,"d")}
              </button>
            </div>
          `}).join("")}
      </div>
    `}}document.addEventListener("DOMContentLoaded",()=>{const r=new _,e=new lt(r),t=new ht(r);window.calendarApp={service:r,view:e},window.miniCalendar=t});
